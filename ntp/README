Description:

The run_cpu program measures the amount of CPU time the run_cpu
program is able to consume while competing for CPU time.

The basic mechanism of an application measuring the amount of CPU
time it receives comes from hourglass:

http://www.cs.utah.edu/flux/papers/hourglass-usenix02/
http://www.cs.utah.edu/~regehr/hourglass/

Run_cpu can be used to indirectly measure the amount of CPU time
other activities on the system consume.  For example, to measure a
network device driver, one could use run_cpu to indirectly get the
amount of CPU time consumed.  One would setup run_cpu to start at
a low priority to "soak up" available CPU time left over from the
device driver activites (assuming the device driver activities are
executed at a higher priority).  Then the device driver time can
be inferred by subtracting the run_cpu time conumed from the total
time.  Note that currently this indirect method will only work if
one processor is available.

-----
Program setup:

To retrieve accurate time measurements, this program uses the Time
Stamp Counter (tsc) of the processor.

Due to this, strange results may occur if power saving features
are used and a constant_tsc is not available.  To check if a
constant_tsc is availabe run:

# cat /proc/cpuinfo

Under flags, constant_tsc will be seen if the processor supports
this feature.  Fortunately, most modern processors do support this
feature.

-----
Calibrating cpu_hz:

To retrieve wall clock time from some number of cycles consumed,
the speed of the processor is needed in cycles/sec.

The program cpu_hz can be used to get this value.  Just allow this
program to run until a sufficient vaule of the speed of the
processor can be determined.  This program uses ntp time servers
to retrieve an accurate wall-clock time.

Then, place this value in a file called ".cpu_hz".  Run_cpu will
then check for this file and use it as the speed of the processor.
If the .cpu_hz file is not found, run_cpu will attempt to find the
speed of the processor on its own.

-----
Power management:

In the kernel turn off all options under:

Power management and ACPI options  --->


